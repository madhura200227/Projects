# ═══════════════════════════════════════════════════════════════
#  InfraGuard AI v2 – Environment Variables
#  Copy to .env and fill in your API keys
#  Get all keys for free — links provided below each variable
# ═══════════════════════════════════════════════════════════════

# ── Server ──────────────────────────────────────────────────────
HOST=0.0.0.0
PORT=8000
DEBUG=false
RATE_LIMIT_PER_MIN=120
ENVIRONMENT=development   # development | staging | production

# ── Database ────────────────────────────────────────────────────
DATABASE_URL=postgresql+asyncpg://infraguard:infraguard_secret@localhost:5432/infraguard
REDIS_URL=redis://localhost:6379
POSTGRES_PASSWORD=infraguard_secret

# ── Cache TTLs (seconds) ────────────────────────────────────────
REDIS_TTL_TRAFFIC=300      # 5 min  – traffic changes fast
REDIS_TTL_AQI=600          # 10 min
REDIS_TTL_WEATHER=900      # 15 min
REDIS_TTL_FLOOD=3600       # 1 hour
REDIS_TTL_PREDICTION=1800  # 30 min
REDIS_TTL_SCRAPE=86400     # 24 hours – OSM data is stable

# ── Auth ────────────────────────────────────────────────────────
JWT_SECRET=generate-a-256bit-random-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# ── CORS ────────────────────────────────────────────────────────
# Add your frontend URL
ALLOWED_ORIGINS=["http://localhost:3000","https://infraguard.vercel.app","*"]

# ═══════════════════════════════════════════════════════════════
#  FREE APIs (registration required)
# ═══════════════════════════════════════════════════════════════

# ── TomTom Traffic v4 ───────────────────────────────────────────
# Free tier: 2,500 requests/day
# Sign up:   https://developer.tomtom.com/user/register
# Docs:      https://developer.tomtom.com/traffic-api/documentation
TOMTOM_API_KEY=iWrYOmhuyEPShwv3gQeeulqVJ3FDP4Nl

# ── HERE Traffic v7 ─────────────────────────────────────────────
# Free tier: 250,000 transactions/month
# Sign up:   https://developer.here.com/sign-up
# Docs:      https://developer.here.com/documentation/traffic-api
HERE_API_KEY=your_here_api_key_here

# ── OpenWeatherMap ──────────────────────────────────────────────
# Free tier: 60 calls/min, 1,000,000 calls/month
# Covers:    /weather (current), /forecast (5-day), /air_pollution
# Sign up:   https://home.openweathermap.org/users/sign_up
# Docs:      https://openweathermap.org/api
OPENWEATHER_API_KEY=a51d9cd0fa72dcb767656b2d32c30b63

# ── World Air Quality Index (WAQI) ──────────────────────────────
# Free for non-commercial use (no rate limit stated)
# Sign up:   https://aqicn.org/api/
# Docs:      https://aqicn.org/json-api/doc/
WAQI_API_KEY=your_waqi_token_here

# ── NOAA Climate Data Online ────────────────────────────────────
# Free: 1,000 requests/day per token
# Sign up:   https://www.ncdc.noaa.gov/cdo-web/token
# Docs:      https://www.ncdc.noaa.gov/cdo-web/webservices/v2
# Used for:  Historical precipitation records → flood event count
NOAA_API_KEY=LCsIQYuYfoUFNkOlebGcvkLCxlzhSzjJ

# ── data.gov.in (India open data) ───────────────────────────────
# Free with registration (Indian government open data)
# Sign up:   https://data.gov.in/user/register
# Used for:  Road accident data, infrastructure spend (India only)
DATA_GOV_IN_API_KEY=your_datagov_in_key_here

# ═══════════════════════════════════════════════════════════════
#  FREE APIs (NO KEY REQUIRED — always enabled)
# ═══════════════════════════════════════════════════════════════
#
#  ✅ OSM Overpass API  – https://overpass-api.de
#     Road networks, bridges, waterways, infrastructure age tags
#
#  ✅ ReliefWeb API     – https://api.reliefweb.int/v1/disasters
#     UN-managed flood & disaster event database
#
#  ✅ USGS Seismic      – https://earthquake.usgs.gov/ws/designmaps/
#     Real-time seismic hazard maps (ASCE 7-22)
#
#  ✅ World Bank Open Data – https://api.worldbank.org/v2
#     Motor vehicles per capita, road network km, PM2.5 exposure
#
#  ✅ data.transportation.gov – US DOT open data (Socrata API)
#     National Bridge Inventory, highway statistics (USA only)

# ═══════════════════════════════════════════════════════════════
#  ML Model paths
# ═══════════════════════════════════════════════════════════════
MODEL_PATH=ml/weights/xgboost_model.json
CNN_MODEL_PATH=ml/weights/crack_cnn.pt
SYNTHETIC_DATA_PATH=data/synthetic/training_data.csv

# ── Celery (optional — for background tasks) ─────────────────
CELERY_BROKER=redis://localhost:6379/0
CELERY_BACKEND=redis://localhost:6379/1

# ── Logging ──────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_FILE=logs/infraguard.log

# ── Scraper settings ─────────────────────────────────────────
SCRAPER_TIMEOUT_SECONDS=15
SCRAPER_MAX_RETRIES=3
